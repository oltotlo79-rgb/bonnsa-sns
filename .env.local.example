# ===========================================
# 開発環境用の環境変数サンプル
# このファイルを .env.local にコピーして使用してください
# ===========================================

# ===========================================
# データベース（PostgreSQL）
# ===========================================
# ローカル開発時: Dockerまたはローカル PostgreSQL
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/bonsai_sns"

# Supabase使用時（本番環境推奨）:
# - DATABASE_URL: PgBouncer経由（接続プール用）
# - DIRECT_URL: 直接接続（マイグレーション用）
# DATABASE_URL="postgresql://postgres.[ref]:[pass]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres.[ref]:[pass]@aws-0-[region].pooler.supabase.com:5432/postgres"

# ===========================================
# NextAuth.js
# ===========================================
# 本番環境では必ず強力なシークレットキーを設定してください
# 生成コマンド: openssl rand -base64 32
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-development-secret-key-change-in-production

# ===========================================
# アプリケーション
# ===========================================
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ===========================================
# ストレージ設定（画像アップロード）
# ===========================================
# STORAGE_PROVIDER: 使用するストレージプロバイダー
#   - local: ローカルファイル保存（開発用・デフォルト）
#   - r2: Cloudflare R2（本番環境推奨・低コスト）
#   - azure: Azure Blob Storage
STORAGE_PROVIDER=local

# Cloudflare R2設定（STORAGE_PROVIDER=r2 の場合）
# Cloudflare ダッシュボード > R2 > API トークンで取得
# R2_ACCOUNT_ID=your-account-id
# R2_ACCESS_KEY_ID=your-access-key-id
# R2_SECRET_ACCESS_KEY=your-secret-access-key
# R2_BUCKET_NAME=bonsai-uploads
# R2_PUBLIC_URL=https://pub-xxx.r2.dev

# Azure Blob Storage設定（STORAGE_PROVIDER=azure の場合）
# Azure Portalでストレージアカウントを作成し、アクセスキーを取得
# AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
# AZURE_STORAGE_ACCOUNT_KEY=your-storage-key
# AZURE_STORAGE_CONTAINER_NAME=uploads

# ===========================================
# Redis（セッション・キャッシュ・レート制限）
# ===========================================
# Upstash Redis REST API（本番環境推奨）
# https://upstash.com でデータベース作成後、REST URL/トークンを取得
# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxx

# ===========================================
# メール送信設定
# ===========================================
# EMAIL_PROVIDER: 使用するメールプロバイダー
#   - console: コンソール出力（開発用・デフォルト）
#   - resend: Resend（本番環境推奨・無料枠あり）
#   - azure: Azure Communication Services
EMAIL_PROVIDER=resend

# Resend設定（EMAIL_PROVIDER=resend の場合）
# https://resend.com でAPIキーを取得
# RESEND_API_KEY=re_xxxxxxxxxxxx
# EMAIL_FROM=BON-LOG <noreply@resend.dev>

# Azure Communication Services設定（EMAIL_PROVIDER=azure の場合）
# Azure Portalで接続文字列を取得
# AZURE_COMMUNICATION_CONNECTION_STRING=endpoint=https://xxx.communication.azure.com/;accesskey=xxx
# AZURE_EMAIL_SENDER=DoNotReply@your-domain.azurecomm.net

# ===========================================
# 検索設定
# ===========================================
# SEARCH_MODE: 使用する全文検索モード
#   - like: LIKE検索（デフォルト・設定不要）
#   - trgm: pg_trgm使用（Azure等のクラウドDB対応）
#   - bigm: pg_bigm使用（日本語最適・要インストール）
#
# trgm/bigmを使用する場合はセットアップが必要:
#   npx tsx scripts/setup-fulltext-search.ts
# SEARCH_MODE=trgm

# ===========================================
# Stripe（有料会員機能）
# ===========================================
# Stripeダッシュボードで取得: https://dashboard.stripe.com/apikeys
# STRIPE_SECRET_KEY=sk_test_xxx
# STRIPE_WEBHOOK_SECRET=whsec_xxx
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx

# Stripe Price ID（商品の価格ID）
# Stripeダッシュボード > 商品 > 価格IDをコピー
# STRIPE_PRICE_ID_MONTHLY=price_xxx
# STRIPE_PRICE_ID_YEARLY=price_xxx

# ===========================================
# エラー監視（Sentry）
# ===========================================
# https://sentry.io でプロジェクト作成後、DSNを取得
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_AUTH_TOKEN=sntrys_xxx

# ===========================================
# MCP設定（Claude Code使用時のみ）
# ===========================================
# MCP設定を使用の場合は下記.envを追加
GITHUB_PERSONAL_ACCESS_TOKEN=""


# ===========================================
# ===========================================
# 本番環境デプロイチェックリスト
# ===========================================
# ===========================================
#
# 1. 必須環境変数の設定
#    [ ] DATABASE_URL（Supabase推奨）
#    [ ] DIRECT_URL（Supabaseの場合）
#    [ ] NEXTAUTH_URL（本番URLに変更）
#    [ ] NEXTAUTH_SECRET（openssl rand -base64 32 で生成）
#    [ ] NEXT_PUBLIC_APP_URL（本番URLに変更）
#
# 2. ストレージ設定
#    [ ] STORAGE_PROVIDER=r2（Cloudflare R2推奨）
#    [ ] R2_ACCOUNT_ID, R2_ACCESS_KEY_ID, R2_SECRET_ACCESS_KEY
#    [ ] R2_BUCKET_NAME, R2_PUBLIC_URL
#
# 3. Redis（レート制限・キャッシュ）
#    [ ] UPSTASH_REDIS_REST_URL
#    [ ] UPSTASH_REDIS_REST_TOKEN
#
# 4. メール送信
#    [ ] EMAIL_PROVIDER=resend
#    [ ] RESEND_API_KEY
#    [ ] EMAIL_FROM（独自ドメイン推奨）
#
# 5. Stripe（有料会員機能を使う場合）
#    [ ] STRIPE_SECRET_KEY（本番キー sk_live_xxx）
#    [ ] STRIPE_WEBHOOK_SECRET
#    [ ] NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY（本番キー pk_live_xxx）
#    [ ] STRIPE_PRICE_ID_MONTHLY, STRIPE_PRICE_ID_YEARLY
#
# 6. エラー監視（推奨）
#    [ ] SENTRY_DSN, NEXT_PUBLIC_SENTRY_DSN
#
# 7. デプロイ前の確認事項
#    [ ] npm run build が成功すること
#    [ ] npm run lint がエラーなしで通ること
#    [ ] Prismaスキーマが最新（npx prisma db push / migrate deploy）
#    [ ] シードデータが投入済み（npx prisma db seed）
#    [ ] Webhookエンドポイントの設定（Stripe等）
#
# ===========================================
# 本番環境用テンプレート（コピーして使用）
# ===========================================
#
# DATABASE_URL="postgresql://postgres.[ref]:[pass]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres.[ref]:[pass]@aws-0-[region].pooler.supabase.com:5432/postgres"
# NEXTAUTH_URL=https://your-domain.com
# NEXTAUTH_SECRET=<openssl rand -base64 32 で生成>
# NEXT_PUBLIC_APP_URL=https://your-domain.com
#
# STORAGE_PROVIDER=r2
# R2_ACCOUNT_ID=xxx
# R2_ACCESS_KEY_ID=xxx
# R2_SECRET_ACCESS_KEY=xxx
# R2_BUCKET_NAME=bonsai-uploads
# R2_PUBLIC_URL=https://pub-xxx.r2.dev
#
# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxx
#
# EMAIL_PROVIDER=resend
# RESEND_API_KEY=re_xxx
# EMAIL_FROM=BON-LOG <noreply@your-domain.com>
#
# STRIPE_SECRET_KEY=sk_live_xxx
# STRIPE_WEBHOOK_SECRET=whsec_xxx
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_xxx
# STRIPE_PRICE_ID_MONTHLY=price_xxx
# STRIPE_PRICE_ID_YEARLY=price_xxx
#
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
