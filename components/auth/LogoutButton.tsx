/**
 * ログアウトボタンコンポーネント
 *
 * このファイルは、ログアウト機能を提供するボタンコンポーネントを提供します。
 * ヘッダーや設定ページで使用されます。
 *
 * ## 機能概要
 * - クリックでログアウト処理を実行
 * - ログアウト後、ログインページへリダイレクト
 *
 * ## 技術詳細
 * - NextAuth.jsのsignOut関数を使用
 * - callbackUrlでログアウト後の遷移先を指定
 *
 * @module components/auth/LogoutButton
 */

'use client'

// ============================================================
// インポート
// ============================================================

/**
 * NextAuth.jsのサインアウト関数
 * セッション破棄とリダイレクトを処理
 */
import { signOut } from 'next-auth/react'

/**
 * shadcn/uiのButtonコンポーネント
 */
import { Button } from '@/components/ui/button'

// ============================================================
// メインコンポーネント
// ============================================================

/**
 * ログアウトボタンコンポーネント
 *
 * ## 機能
 * - クリックでNextAuth.jsのログアウト処理を実行
 * - ログアウト完了後、ログインページへリダイレクト
 *
 * @example
 * ```tsx
 * <LogoutButton />
 * ```
 */
export function LogoutButton() {
  // ------------------------------------------------------------
  // イベントハンドラ
  // ------------------------------------------------------------

  /**
   * ログアウトハンドラ
   *
   * NextAuth.jsのsignOut関数を呼び出し、
   * セッションを破棄してログインページへリダイレクト
   */
  async function handleLogout() {
    await signOut({ callbackUrl: '/login' })
  }

  // ------------------------------------------------------------
  // レンダリング
  // ------------------------------------------------------------

  return (
    <Button variant="ghost" size="sm" onClick={handleLogout}>
      ログアウト
    </Button>
  )
}
